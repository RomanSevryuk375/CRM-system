<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="CRMSystemMobile.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:CRMSystemMobile.ViewModel"
    x:DataType="vm:LoginViewModel"
    Shell.FlyoutBehavior="Disabled"
    Shell.NavBarIsVisible="False"
    Shell.TabBarIsVisible="False">

    <VerticalStackLayout BackgroundColor="#112347">
        <Grid BackgroundColor="#112347" RowDefinitions="*">
            <Ellipse
                Margin="0,-180,0,0"
                Fill="#ffffff"
                HeightRequest="480"
                HorizontalOptions="Center"
                VerticalOptions="Start"
                WidthRequest="630" />
            <VerticalStackLayout
                HeightRequest="250"
                HorizontalOptions="Center"
                Spacing="0"
                VerticalOptions="Start">
                <Image
                    Margin="0,120,0,0"
                    HeightRequest="46"
                    Source="logotype_dark.png" />
            </VerticalStackLayout>
        </Grid>

        <VerticalStackLayout
            Margin="0,20,0,0"
            Padding="40"
            Spacing="15">
            <Grid Margin="0,5">
                <Border
                    HeightRequest="50"
                    StrokeShape="RoundRectangle 5"
                    VerticalOptions="End">
                    <Entry
                        Margin="10,0"
                        Completed="OnLoginCompleted"
                        FontSize="16"
                        Placeholder="Введите логин"
                        ReturnType="Next"
                        Text="{Binding UserLogin, Mode=TwoWay}"
                        TextColor="#ffffff"
                        VerticalOptions="Center" />
                </Border>
                <Border
                    Margin="15,-15,0,0"
                    Padding="5,3,5,3"
                    Background="#ffffff"
                    HorizontalOptions="Start"
                    StrokeShape="RoundRectangle 3"
                    VerticalOptions="Start"
                    ZIndex="1">
                    <Label
                        FontSize="14"
                        Text="Логин"
                        TextColor="#112347" />
                </Border>
            </Grid>

            <Grid Margin="0,10">
                <Border
                    HeightRequest="50"
                    StrokeShape="RoundRectangle 5"
                    VerticalOptions="End">
                    <Grid ColumnDefinitions="*, 40">
                        <Entry
                            x:Name="PasswordEntry"
                            Grid.Column="0"
                            Margin="10,0,0,0"
                            FontSize="16"
                            IsPassword="{Binding IsPasswordHidden}"
                            Placeholder="Введите пароль"
                            ReturnCommand="{Binding LoginCommand}"
                            ReturnType="Go"
                            Text="{Binding UserPassword, Mode=TwoWay}"
                            TextColor="#ffffff"
                            VerticalOptions="Center" />

                        <ImageButton
                            Grid.Column="1"
                            Margin="-10,0,0,0"
                            Command="{Binding TogglePasswordCommand}"
                            HeightRequest="10"
                            HorizontalOptions="Center"
                            Source="{Binding PasswordIcon}"
                            VerticalOptions="Center"
                            WidthRequest="10" />
                    </Grid>
                </Border>
                <Border
                    Margin="15,-15,0,0"
                    Padding="5,3,5,3"
                    Background="#ffffff"
                    HorizontalOptions="Start"
                    StrokeShape="RoundRectangle 3"
                    VerticalOptions="Start"
                    ZIndex="1">
                    <Label
                        FontSize="14"
                        Text="Пароль"
                        TextColor="#112347" />
                </Border>
            </Grid>

            <Button
                BackgroundColor="#ffffff"
                Command="{Binding LoginCommand}"
                FontAttributes="Bold"
                FontSize="16"
                Text="Войти"
                TextColor="#112347" />
            <Button
                BackgroundColor="#112347"
                Command="{Binding GoToRegistrationCommand}"
                FontAttributes="None"
                FontSize="14"
                Text="Зарегистрироваться"
                TextColor="#ffffff" />
        </VerticalStackLayout>
    </VerticalStackLayout>
</ContentPage>
